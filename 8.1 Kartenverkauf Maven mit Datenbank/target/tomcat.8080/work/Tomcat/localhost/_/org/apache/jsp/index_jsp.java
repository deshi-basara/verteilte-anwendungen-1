/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.57
 * Generated at: 2015-05-01 13:02:53 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import hfu.simon.model.*;
import java.util.Vector;
import hfu.simon.helper.TimedTask;

public final class index_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("<head lang=\"en\">\n");
      out.write("\t<meta charset=\"UTF-8\">\n");
      out.write("\t<title>Kartenverkauf</title>\n");
      out.write("\n");
      out.write("\t<!-- Styles -->\n");
      out.write("\t<link rel=\"stylesheet\" href=\"css/normalize.css\" media=\"screen,projection\"/>\n");
      out.write("\t<link rel=\"stylesheet\" href=\"css/materialize.min.css\">\n");
      out.write("\t<link rel=\"stylesheet\" href=\"css/main.css\"/>\n");
      out.write("\n");
      out.write("\t<!--Let browser know website is optimized for mobile-->\n");
      out.write("\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"/>\n");
      out.write("\n");
      out.write("</head>\n");
      out.write("<body>\n");
      out.write("\t<div id=\"container-vertical-align\" class=\"container\">\n");
      out.write("\t\t<div id=\"container-middle\">\n");
      out.write("\n");
      out.write("\t\t\t<div id=\"ticket-grid-wrapper\" class=\"row center-align\">\n");
      out.write("\n");
      out.write("\t\t\t\t<!-- Ticket-Grid -->\n");
      out.write("\t\t\t\t<div id=\"ticket-grid\" class=\"card-panel col s6 offset-s3\">\n");
      out.write("\n");
      out.write("\t\t\t\t\t");

						// get all needed values for printing the ticket-grid
						Sale saleModel = (Sale) application.getAttribute("saleModel");
						Vector<Ticket> tickets = saleModel.getAllTickets();
						boolean saleEnabled = saleModel.isSaleEnabled();
						TimedTask task = saleModel.getTimedTask();
						// calculate boxes
						int ticketsAvailable = saleModel.getTicketCount();
						int rows = ticketsAvailable / 12;
						int index = 1;

						// print 10 tickets in one row and create chunks for each row
						for(int i = 0; i < rows; i++) {

					
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t<div class=\"row\">\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t");


							// print 10 tickets, with their state (booked, sold) and index
							for(int z = 0; z < 12; z++) { 
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t<div class=\"col s1 ticket\n");
      out.write("\t\t\t\t\t\t\t\t\t");
      out.print( (tickets.get(index - 1).getBooked() == 1) ? "booked" : "" );
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\t");
      out.print( (tickets.get(index - 1).getSold() == 1) ? "sold" : "" );
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\">\n");
      out.write("\t\t\t\t\t\t\t");
      out.print( index++ );
      out.write("\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t");
 } 
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\n");
      out.write("\t\t\t\t\t");
 	} 
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t<div id=\"ticket-map\">\n");
      out.write("\t\t\t\t\t\t<div class=\"row\">\n");
      out.write("\t\t\t\t\t\t\t<div class=\"col s4 z-depth-1\">frei</div>\n");
      out.write("\t\t\t\t\t\t\t<div class=\"col s4 z-depth-1 booked\">reserviert</div>\n");
      out.write("\t\t\t\t\t\t\t<div class=\"col s4 z-depth-1 sold\">verkauft</div>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t");
 if(!saleEnabled) { 
      out.write("\n");
      out.write("\t\t\t\t\t\t<div class=\"z-depth-1\">\n");
      out.write("\t\t\t\t\t\t\t<p class=\"black-text\">Zum jetzigen Zeitpunkt können keine Reservierungen mehr angenommen werden</p>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t");
 } 
      out.write("\n");
      out.write("\t\t\t\t\t</div>\n");
      out.write("\n");
      out.write("\t\t\t\t</div>\n");
      out.write("\t\t\t</div>\n");
      out.write("\n");
      out.write("\t\t\t<!-- Cmd-Forms -->\n");
      out.write("\t\t\t<div id=\"order-collapse-wrapper\" class=\"row left-align\">\n");
      out.write("\n");
      out.write("\t\t\t\t<ul class=\"collapsible popout\" data-collapsible=\"accordion\">\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-header\"><i class=\"mdi-editor-attach-money\"></i>Kauf eines freien Tickets</div>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-body white left-align\">\n");
      out.write("\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row center-align\">\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s12\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"seat_number_two\" type=\"text\" name=\"index\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"seat_number_two\">Sitzplatznummer</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"sell\"/>\n");
      out.write("\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn\">Ausführen</button>\n");
      out.write("\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t");
 if(saleEnabled) { 
      out.write("\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-header\"><i class=\"mdi-action-account-balance-wallet\"></i>Reservierung eines Tickets</div>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-body white center-align\">\n");
      out.write("\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row\">\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"seat_number\" type=\"text\" class=\"validate\" name=\"index\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"seat_number\">Sitzplatznummer</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"owner_name\" type=\"text\" class=\"validate\" name=\"owner\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"owner_name\">Reservierungsname</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"book\"/>\n");
      out.write("\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn\">Ausführen</button>\n");
      out.write("\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t");
 } 
      out.write("\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-header\"><i class=\"mdi-action-account-balance-wallet\"></i>Verkauf eines reservierten Tickets</div>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-body white center-align\">\n");
      out.write("\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row\">\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"seat_number_three\" type=\"text\" class=\"validate\" name=\"index\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"seat_number_three\">Sitzplatznummer</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"owner_name_three\" type=\"text\" class=\"validate\" name=\"owner\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"owner_name_three\">Reservierungsname</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"unbook\"/>\n");
      out.write("\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn\">Ausführen</button>\n");
      out.write("\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-header\"><i class=\"mdi-alert-warning\"></i>Stornierung eines Tickets</div>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-body white left-align\">\n");
      out.write("\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row center-align\">\n");
      out.write("\t\t\t\t\t\t\t\t<div class=\"input-field col s12\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input id=\"seat_number_four\" type=\"text\" name=\"index\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<label for=\"seat_number_four\">Sitzplatznummer</label>\n");
      out.write("\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"unsell\"/>\n");
      out.write("\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn\">Ausführen</button>\n");
      out.write("\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t\t<li>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-header\">\n");
      out.write("\t\t\t\t\t\t\t<i class=\"mdi-alert-warning\"></i>Reservierungen aufheben\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t<!-- Does our model have a TimedTask? -->\n");
      out.write("\t\t\t\t\t\t\t");
 if(task != null) { 
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t<span class=\"badge\">Zeitgesteuerte Deaktivierung: ");
      out.print( task.getExecutionTime() );
      out.write("</span>\n");
      out.write("\t\t\t\t\t\t\t");
 } 
      out.write("\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t<div class=\"collapsible-body white center-align\">\n");
      out.write("\t\t\t\t\t\t\t<div class=\"col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t<p>\n");
      out.write("\t\t\t\t\t\t\t\t\tMit dieser Operation werden alle bestehenden Reservierungen gelöscht und ab sofort Reservierungen unterbunden/erneut aufgenommen\n");
      out.write("\t\t\t\t\t\t\t\t</p>\n");
      out.write("\t\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"unbookall\"/>\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\t");
 if(saleEnabled) { 
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn btn2\">Sofort deaktivieren</button>\n");
      out.write("\t\t\t\t\t\t\t\t\t");
 } else { 
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn\">Sofort aktivieren</button>\n");
      out.write("\t\t\t\t\t\t\t\t\t");
 } 
      out.write("\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t<div class=\"col s6\">\n");
      out.write("\t\t\t\t\t\t\t\t<form action=\"/sale\" method=\"post\" class=\"row\">\n");
      out.write("\t\t\t\t\t\t\t\t\t<div class=\"input-field col s6 custom-label\">\n");
      out.write("\t\t\t\t\t\t\t\t\t\tDeaktiviere Reservierungen am:\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t\t<div class=\"input-field col s3\">\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<input id=\"date\" type=\"date\" class=\"datepicker\" name=\"date\">\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t\t<div id=\"time\" class=\"input-field col s3\">\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<input type=\"time\" class=\"validate\" name=\"time\"><span>Uhr</span>\n");
      out.write("\t\t\t\t\t\t\t\t\t\t<!--<label for=\"time\">Vor Beginn deaktivieren in Minuten</label>-->\n");
      out.write("\t\t\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t\t\t\t<input type=\"hidden\" name=\"cmd\" value=\"disablebooking\"/>\n");
      out.write("\n");
      out.write("\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"waves-effect waves-light btn btn2 custom-button\">Zeitgesteuert deaktivieren</button>\n");
      out.write("\t\t\t\t\t\t\t\t</form>\n");
      out.write("\t\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t\t</div>\n");
      out.write("\t\t\t\t\t</li>\n");
      out.write("\t\t\t\t</ul>\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\n");
      out.write("\t<!-- Error-Message -->\n");
      out.write("\t");
 if(request.getAttribute("error") != null) { 
      out.write("\n");
      out.write("\t<div id=\"error-msg-wrapper\">\n");
      out.write("\t\t<div class=\"card-panel z-depth-1 valign-wrapper\">\n");
      out.write("\t\t\t<div class=\"valign white-text\">\n");
      out.write("\t\t\t\t<i class=\"small mdi-alert-error\"></i> Fehler: ");
      out.print( request.getAttribute("error") );
      out.write("\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\t");
 } 
      out.write("\n");
      out.write("\n");
      out.write("\t<!-- Success-Message -->\n");
      out.write("\t");
 if(request.getAttribute("success") != null) { 
      out.write("\n");
      out.write("\t<div id=\"success-msg-wrapper\">\n");
      out.write("\t\t<div class=\"card-panel z-depth-1 valign-wrapper\">\n");
      out.write("\t\t\t<div class=\"valign white-text\">\n");
      out.write("\t\t\t\t<i class=\"small mdi-navigation-check\"></i> Operation erfolgreich ausgeführt\n");
      out.write("\t\t\t</div>\n");
      out.write("\t\t</div>\n");
      out.write("\t</div>\n");
      out.write("\t");
 } 
      out.write("\n");
      out.write("\n");
      out.write("\t<!-- Vendor-Scripts -->\n");
      out.write("\t<script src=\"js/jquery.min.js\"></script>\n");
      out.write("\t<script src=\"js/materialize.js\"></script>\n");
      out.write("\n");
      out.write("\t<!-- Custom-scripts -->\n");
      out.write("\t<script>\n");
      out.write("\t\t$('.datepicker').pickadate({\n");
      out.write("\t\t\tselectMonths: true, // Creates a dropdown to control month\n");
      out.write("\t\t\tselectYears: 15 // Creates a dropdown of 15 years to control year\n");
      out.write("\t\t});\n");
      out.write("\t</script>\n");
      out.write("\n");
      out.write("</body>\n");
      out.write("</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
